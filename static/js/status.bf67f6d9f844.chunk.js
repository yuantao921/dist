import{j as s,o as b,b9 as y,r as c,ar as d,B as u,cK as C,cH as N,l as v,C as p,ah as w}from"./vendor.83d59a4358fc.chunk.js";import{M as I,m,j as z,B as G,b as j}from"./index.8aebe18ecbfa.js";import{D as k}from"./DataGrid.43a54455eaf3.chunk.js";const B=({children:a,className:e})=>s(I,{className:e,content:!1,children:a}),M=m()(a=>({icon:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},successIcon:{color:a.palette.success.main,fontSize:".8rem"},errorIcon:{color:a.palette.error.main,fontSize:".8rem"},rateBox:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},rateChip:{minWidth:a.spacing(8)}})),P=({className:a})=>{const{t:e}=b(),{data:l}=z(),{data:n,isLoading:h}=G(void 0,{skip:(l==null?void 0:l.plan_id)===null,pollingInterval:10*1e3}),{classes:o}=M(),[f,g]=y.useState(10),x=c.useMemo(()=>{var t;return(t=n==null?void 0:n.filter(r=>r.show===1).sort((r,i)=>{switch(!0){case r.sort>i.sort:return 1;case r.sort<i.sort:return-1;default:return 0}}))!=null?t:[]},[n]),S=c.useMemo(()=>[{field:"id",headerName:e("node.status.table.id",{context:"header"}).toString(),description:e("node.status.table.id",{context:"description"}).toString(),type:"number"},{field:"name",headerName:e("node.status.table.name",{context:"header"}).toString(),description:e("node.status.table.name",{context:"description"}).toString(),minWidth:160,sortable:!0,filterable:!0},{field:"last_check_at",headerName:e("node.status.table.status",{context:"header"}).toString(),description:e("node.status.table.status",{context:"description"}).toString(),width:120,sortable:!1,type:"boolean",valueGetter:t=>t.value&&Math.abs(d.unix(parseInt(t.value)).diff(d(),"minute"))<=5,renderCell:t=>s(u,{className:o.icon,children:t.value?s(C,{className:o.successIcon}):s(N,{className:o.errorIcon})})},{field:"type",headerName:e("node.status.table.type",{context:"header"}).toString(),description:e("node.status.table.type",{context:"description"}).toString(),width:160,sortable:!1,valueFormatter:t=>v.capitalize(t.value)},{field:"rate",headerName:e("node.status.table.rate",{context:"header"}).toString(),description:e("node.status.table.rate",{context:"description"}).toString(),width:120,sortable:!1,renderCell:t=>s(u,{className:o.rateBox,children:s(p,{label:`${t.value} x`,size:"small",className:o.rateChip})})},{field:"tags",headerName:e("node.status.table.tags",{context:"header"}).toString(),description:e("node.status.table.tags",{context:"description"}).toString(),minWidth:160,sortable:!1,type:"singleSelect",renderCell:t=>{var r;return s(w,{direction:"row",spacing:1,children:(r=t.value)==null?void 0:r.map(i=>s(p,{label:i,size:"small"},i))})}}],[n,e,o]);return s(k,{columns:S,rows:x,className:a,loading:h,rowsPerPageOptions:[5,10,25,50],pageSize:f,onPageSizeChange:t=>g(t)})},W=m()(a=>({root:{flexGrow:1,height:"100%",display:"flex",flexDirection:"column"},dataGrip:{height:"100%"}})),D=()=>{const{classes:a}=W();return s(B,{className:a.root,children:s(P,{className:a.dataGrip})})},Q=()=>(j("node-status"),s(D,{}));export{Q as default};
